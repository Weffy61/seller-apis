# Работа с маркетплейсами

Данные скрипты позволят вам получать цены и остатки с магазина часов [timeworld](https://timeworld.ru). После этого 
скрипты обновляют ваши цены на Ozon, либо  Яндекс Маркет в соответствии с рекомендованными поставщиком, 
а также обновляются остатки. 

## Установка
```commandline
git clone https://github.com/Weffy61/seller-apis
```
## Установка зависимостей
Переход в директорию с исполняемым файлом и установка
```commandline
cd seller-apis
```

```commandline
pip install -r requirements.txt
```

## Создание и настройка .env

Создайте в корне папки `seller-apis` файл `.env`. Откройте его для редактирования любым текстовым редактором.  

```djangourlpath
export SELLER_TOKEN = вставить Ozon seller token
export CLIENT_ID = вставить Ozon client id
export MARKET_TOKEN = вставить Yandex Market token
export FBS_ID = вставить Yandex Market FBS id
export DBS_ID = вставить Yandex Market DBS id
export WAREHOUSE_FBS_ID = вставить Yandex Market Warehouse FBS id
export WAREHOUSE_DBS_ID = вставить Yandex Market Warehouse DBS id
```

[Подробнее](https://docs.ozon.ru/api/seller/) про Ozon API.

## Запуск  скрипта для работы с Ozon

```commandline
python seller.py
```

Данный скрипт изначально получает список артикулов ваших товаров на [Ozon](https://ozon.ru/). После этого он получает 
каталог товаров с [timeworld](https://timeworld.ru). Далее, при наличии совпадений товара у вас в маркетплейсе и в 
каталоге товаров, он обновляет колличество у вас по следующей схеме: 

- если в каталоге больше 10 едениц товара соответствующего вашему, он ставит вам количество в наличии 100 едениц, 
- если 1 еденица товара, ставит вам 0 едениц данного товара
- если же иное значение, то берет его из таблицы поставщика 

Также, если скрипт не находит товар, который у вас есть в списке артукулов поставщика, то он обновляет его с 
колличеством 0. После он обновляет цены в вашем каталоге на маркетплейсе, для товаров, которые были у вас ранее, 
в соответствии с рекомендованной ценой продавца.  

## Запуск  скрипта для работы с Yandex Market

```commandline
python market.py
```

Данный скрипт изначально получает каталог товаров с [timeworld](https://timeworld.ru). После этого он получает список 
артикулов ваших товаров с [Yandex Market](https://market.yandex.ru). Далее производятся одинаковые операции по вашим 
торговым моделям сначала по FBS, после по DBS.
При наличии совпадений артикула в вашем каталоге маркетплейса, а также в каталоге поставщика, скрипт обновляет 
колличество товаров по следующей схеме:
- если в каталоге больше 10 едениц товара соответствующего вашему, он ставит вам количество в наличии 100 едениц 
- если 1 еденица товара, ставит вам 0 едениц данного товара
- если же иное значение, то берет его из таблицы поставщика 

Также, если скрипт не находит товар, который у вас есть в списке артукулов поставщика, то он обновляет его с 
колличеством 0. После он обновляет цены в вашем каталоге на маркетплейсе, для товаров, которые были у вас ранее, 
в соответствии с рекомендованной ценой продавца.  
